{
    "apiVersion": "0.1",
    "swaggerVersion": "1.2",
    "basePath": "/",
    "resourcePath": "/submit",
    "apis": [
        {
            "path": "/submit",
            "operations": [
                {
                    "summary": "Submit a job to Aurora via Herc",
                    "nickname": "Submit",
                    "notes": "",
                    "method": "POST",
                    "type": "Status",
                    "parameters": [
                        {
                            "name": "body",
                            "description": "The job submission request json",
                            "paramType": "body",
                            "required": true,
                            "type": "JobSubmission",
                            "allowMultiple": false,
                        }
                    ],
                    "produces": [
                        "application/json"
                    ],
                    "responseMessages": [
                        {
                            "code": 200,
                            "message": "Successful request"
                        },
                        {
                            "code": 500,
                            "message": "Herc server error"
                        }
                    ]
                }
            ]
        }
    ],
    "models": {
        "Status": {
            "id": "Status",
            "description": "Job status",
            "properties": {
                "jobid": {
                    "description": "The Aurora job id",
                    "type": "string"
                },
                "status": {
                    "description": "The job status",
                    "type": "string"
                },
                "time": {
                    "description": "The time when the job moved into this status",
                    "type": "long"
                }
            }
        },
        "JobSubmission": {
            "id": "JobSubmission",
            "description" : "Job submission request",
            "properties" : {
                "commandline" : {
                    "type" : "string",
                    "description" : "The command line used to run the job"
                },
                "docker" : {
                    "type" : "string",
                    "description": "Docker image to use when running the job"
                },
                "inputs" : {
                    "type" : "array",
                    "items" : {
                        "$ref" : "pathpair"
                    },
                    "description" : "Input files to use to run job"
                },
                "outputs" : {
                    "type" : "array",
                    "items" : {
                        "$ref" : "pathpair"
                    },
                    "description" : "Output files that will be generated by the job"
                },
                "resources" : {
                    "$ref" : "Resources"
                },
                "stdout": {
                    "type": "string",
                    "defaultValue": ""
                },
                "stderr": {
                    "type": "string",
                    "defaultValue": ""
                }
            },
            "required": [
                "commandline",
                "docker",
                "inputs",
                "outputs",
                "resources"
            ]
        },
        "Resources" : {
            "id" : "Resources",
            "description" : "Resources required for job to run",
            "properties": {
                "cpus": {
                    "minimum": 0.1,
                    "type": "number"
                },
                "disk": {
                    "minimum": 1,
                    "type": "integer"
                },
                "diskunit": {
                    "$ref": "bytesunit"
                },
                "mem": {
                    "minimum": 1,
                    "type": "integer"
                },
                "memunit": {
                    "$ref": "bytesunit"
                }
            },
            "required": [
                "cpus",
                "mem",
                "disk"
            ]
        },
        "pathpair" : {
            "properties": {
                "cloud": {
                    "type": "string"
                },
                "local": {
                    "type": "string"
                }
            },
            "required": [
                "cloud",
                "local"
            ]
        },
        "bytesunit" : {
            "type": "string",
            "defaultValue": "MB",
            "enum": ["BYTES","KB","MB","GB","TB"]
        }
    }
}
